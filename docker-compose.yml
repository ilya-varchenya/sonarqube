version: '3.7'
networks:
  default:
    external:
      name: qps-infra
services:
  sonarqube:
    image: qaprosoft/sonarqube:${TAG_SONAR}
    # https://jira.sonarsource.com/browse/SONAR-13272 bug with SONAR_WEB_CONTEXT env variable
    command: -Dsonar.web.context=/sonarqube
    volumes:
      - ./sonarqube/data:/opt/sonarqube/data
      - ./sonarqube/logs:/opt/sonarqube/logs
      - ./sonarqube/extensions:/opt/sonarqube/extensions
    ports:
     - "9000:9000"
     - "9002:9002"
